## Part II: PostgreSQL Architecture & Internals

### Chapter 3: Process-Based Architecture

#### 3.1 Postmaster Process

- Master controller, parent of all processes
- Listens on port 5432
- Forks backend process per connection
- Manages server lifecycle

#### 3.2 Backend Processes

- Process-per-connection model
- Each client gets dedicated OS process
- Execute SQL queries, manage transactions
- Isolation and stability over threads
- Controlled by max_connections
- Trade-off: Memory overhead vs reliability

#### 3.3 Why Processes Over Threads?

- Historical stability concerns
- Easier maintenance and debugging
- Forking with copy-on-write
- Own memory space per process
- Simpler internals, no fine-grained locking

#### 3.4 Background Workers & Auxiliary Processes

- Autovacuum workers: Cleanup dead tuples
- WAL writer: Write-ahead log management
- Checkpointer: Periodic checkpoints
- Background writer: Async writes
- Statistics collector: Query stats
- Parallel query workers: Configured by max_worker_processes
