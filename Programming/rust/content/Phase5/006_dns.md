# DNS â€” How Names Become Numbers (From First Principles)

## One Brutal Truth

Computers do not understand names.

They only understand numbers.

Humans love:

- airbnb.com
- google.com

Computers only work with:

- 104.21.32.15
- 142.250.182.46

**DNS exists to translate names â†’ numbers.**

Nothing more. Nothing less.

---

## 1. What DNS Actually Is (Definition)

**DNS (Domain Name System)** = a distributed phonebook for the internet.

**Input:** a domain name (human-readable name)

**Output:** an IP address (machine-readable number)

**Example:**

```
airbnb.com â†’ 104.21.32.15
```

### ðŸ“Œ Important

- DNS does **not** send packets
- DNS does **not** fetch websites
- **DNS only answers one question:** "What number corresponds to this name?"

---

## 2. Why DNS Must Exist (First Principles)

Imagine a world without DNS.

You want to open Airbnb.

You must remember:

```
https://104.21.32.15/login
```

Now Airbnb changes servers.

The IP changes.

Your bookmark is dead.

**Solution:** we separate concerns:

- **Names** â†’ stable (airbnb.com)
- **Numbers** â†’ changeable (IP addresses)

**DNS is that separation layer.**

---

## 3. What a "Domain Name" Is (Definition)

A **domain name** is a structured name with dots.

**Example:**

```
login.api.mountainkid.ai
```

Read **right to left:**

```
.ai   â†’ TLD
mountainkid  â†’ domain
api   â†’ subdomain
login â†’ host label
```

### TLD (Top-Level Domain) - Definition

A **TLD** is the last part of a domain name.

**Examples:**

- .com
- .org
- .ai
- .in

**Important:** TLDs are managed globally.

---

## 4. Who Answers DNS Questions? (Very Important)

There is **no single DNS server**.

DNS is **distributed** (spread across many machines).

There are **4 logical roles.**

We'll define each one.

---

## 1. Resolver (The One You Actually Talk To)

### DNS Resolver - Definition

A **resolver** is a server that:

- Receives your DNS question
- Finds the answer for you
- Caches (stores) it for later

Your laptop usually uses:

- ISP resolver
- Google DNS (8.8.8.8)
- Cloudflare DNS (1.1.1.1)

**When you type:** `airbnb.com`

**Your computer asks:**

```
"Hey resolver, what is the IP for airbnb.com?"
```

---

## 2. Root Servers (The Top of the Hierarchy)

### Root DNS Server - Definition

A **root server** knows:

```
"Which servers are responsible for each TLD."
```

It does **NOT** know IPs of websites.

It only knows:

```
.com â†’ ask these servers
.ai  â†’ ask those servers
```

**There are 13 logical root servers** (Aâ€“M), replicated globally.

### ðŸ“Œ Important

Root servers are rarely hit directly because of caching.

---

## 3. TLD Servers (Middle Layer)

### TLD DNS Server - Definition

A **TLD server** knows:

```
"Which servers manage a specific domain."
```

**Example:**

```
.com TLD server knows who manages airbnb.com
.ai TLD server knows who manages sari.ai
```

**Important:** It still does **not** know IP addresses.

It only **delegates.**

---

## 4. Authoritative Server (Final Truth)

### Authoritative DNS Server - Definition

An **authoritative server:**

- Is owned by the domain owner
- Stores the actual DNS records
- Gives the final answer

**This server says:**

```
airbnb.com â†’ 104.21.32.15
```

**This answer is considered truth.**

---

## 9. Full DNS Resolution (Step by Step)

You type: `airbnb.com`

```
Step 1: Your computer â†’ Resolver
"What is the IP for airbnb.com?"

Step 2: Resolver â†’ Root server
"Who handles .com?"

Step 3: Root â†’ Resolver
"Ask these .com servers."

Step 4: Resolver â†’ .com TLD server
"Who handles airbnb.com?"

Step 5: TLD â†’ Resolver
"Ask Airbnb's authoritative servers."

Step 6: Resolver â†’ Authoritative server
"What is the IP?"

Step 7: Authoritative â†’ Resolver
104.21.32.15

Step 8: Resolver â†’ Your computer
airbnb.com â†’ 104.21.32.15
```

**Only now routing starts.**

### ðŸ“Œ Important

**DNS always happens before routing.**

---

## 10. DNS Records (What Is Actually Stored)

### DNS Record - Definition

A **DNS record** is a stored instruction.

### Common DNS Records

**A Record**

- Maps a name â†’ IPv4 address
- Example: `airbnb.com â†’ 104.21.32.15`

**AAAA Record**

- Maps a name â†’ IPv6 address

**CNAME Record**

- Maps a name â†’ another name
- Example: `www.airbnb.com â†’ airbnb.com`

**TXT Record**

- Stores arbitrary text (used for verification, security)

---

## 11. Caching (Why DNS Is Fast)

### Cache - Definition

A **cache** is temporary storage.

**Resolvers cache answers** so they don't repeat work.

Each DNS record has a timer:

### TTL (Time To Live) - Definition

**TTL** = how long the answer is valid (in seconds)

**Example:**

```
TTL = 300
```

**Meaning:** "This answer is valid for 5 minutes."

### ðŸ“Œ Important - TTL Is a Tradeoff

- **Low TTL** â†’ faster changes, more load
- **High TTL** â†’ slower changes, faster lookups

---

| Time   | Resolver Action                           | Query to Authority?     |
| ------ | ----------------------------------------- | ----------------------- |
| 0s     | Gets record (TTL=300) from nameserver     | YES (first time)        |
| 1-299s | Next user visits â†’ serves cache           | NO (still valid)        |
| 300s   | Cache expires                             | Nothing happens         |
| 305s   | Next user visits â†’ re-queries             | YES (only if requested) |
| 310s   | Same user visits again â†’ serves new cache | NO                      |

```text
10:00:00  â†’  First Shimla user hits mountainkid.ai â†’ queries Vercel â†’ caches IP (TTL=300)
10:00:10  â†’  2nd user â†’ instant from cache
10:04:59  â†’  100th user â†’ still cache
10:05:05  â†’  101st user â†’ cache expired â†’ **new query**

```

## 12. Why DNS Sometimes Feels Slow

DNS is slow when:

- Cache expired
- Resolver cold-starts
- Network congestion
- Misconfigured records

**First request:** slow

**Next 1000 requests:** instant

**This is expected behavior, not a bug.**

---

## 13. Why DNS Failures Break Everything

If DNS fails:

- Website doesn't load
- API doesn't resolve
- Microservices can't find each other

Your code may be perfect.

**Still broken.**

### ðŸ“Œ Important

**DNS is a global single dependency layer.**

---

## 14. Real Implications for Your Products

### Your Auth

Login starts with DNS

Auth latency includes DNS lookup

**Key insight:** Bad TTL = slow login

### AirBNB

Maps, payments, reviews â†’ multiple domains

Each domain = DNS lookup

**Key insight:** Cold cache = slow UX

---

## 15. Mental Model (Lock This)

Think of DNS like asking locals:

```text
"Which village has the map?"
Then "Which house in that village?"
Then "This is the exact door."
```

**No one knows everything.**

**Each layer knows just enough.**

**That's the internet.**

---

## Problems

- Why DNS must exist
- Why DNS happens before routing
- Why caching is mandatory
- Why TTL is a tradeoff
- Why DNS failures feel like "internet down"

---

## What's Next (Very Important Fork)

Say one word:

ðŸ‘‰ **TCP** â€” reliability, congestion, real performance  
ðŸ‘‰ **TLS** â€” encryption, HTTPS, certs  
ðŸ‘‰ **BGP** â€” internet politics & massive outages

**Strong opinion:** TCP next. DNS without TCP is half the story.

Your call.
